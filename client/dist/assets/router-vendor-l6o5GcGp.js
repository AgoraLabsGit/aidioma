import{r as u,R as D,s as U}from"./clerk-auth-B-2O3GKj.js";function $(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,s,r,i,o=[],c="",f=e.split("/");for(f[0]||f.shift();r=f.shift();)n=r[0],n==="*"?(o.push(n),c+=r[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(s=r.indexOf("?",1),i=r.indexOf(".",1),o.push(r.substring(1,~s?s:~i?i:r.length)),c+=~s&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(c+=(~s?"?":"")+"\\"+r.substring(i))):c+="/"+r;return{keys:o,pattern:new RegExp("^"+c+(t?"(?=$|/)":"/?$"),"i")}}const B=D.useInsertionEffect,H=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",N=H?u.useLayoutEffect:u.useEffect,F=B||N,C=e=>{const t=u.useRef([e,(...n)=>t[0](...n)]).current;return F(()=>{t[0]=e}),t[1]},M="popstate",y="pushState",E="replaceState",T="hashchange",x=[M,y,E,T],V=e=>{for(const t of x)addEventListener(t,e);return()=>{for(const t of x)removeEventListener(t,e)}},S=(e,t)=>U.useSyncExternalStore(V,e,t),q=()=>location.search,z=({ssrSearch:e=""}={})=>S(q,()=>e),b=()=>location.pathname,A=({ssrPath:e}={})=>S(b,e?()=>e:b),G=(e,{replace:t=!1,state:n=null}={})=>history[t?E:y](n,"",e),J=(e={})=>[A(e),G],R=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[R]>"u"){for(const e of[y,E]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),s=new Event(e);return s.arguments=arguments,dispatchEvent(s),n}}Object.defineProperty(window,R,{value:!0})}const Q=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",L=(e="")=>e==="/"?"":e,W=(e,t)=>e[0]==="~"?e.slice(1):L(t)+e,X=(e="",t)=>Q(w(L(e)),w(t)),w=e=>{try{return decodeURI(e)}catch{return e}},O={hook:J,searchHook:z,parser:$,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},j=u.createContext(O),g=()=>u.useContext(j),I={},K=u.createContext(I),Y=()=>u.useContext(K),_=e=>{const[t,n]=e.hook(e);return[X(e.base,t),C((s,r)=>n(W(s,e.base),r))]},Z=(e,t,n,s)=>{const{pattern:r,keys:i}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",s),o=r.exec(n)||[],[c,...f]=o;return c!==void 0?[!0,(()=>{const a=i!==!1?Object.fromEntries(i.map((p,h)=>[p,f[h]])):o.groups;let l={...f};return a&&Object.assign(l,a),l})(),...s?[c]:[]]:[!1,null]},ee=({children:e,...t})=>{var l,p;const n=g(),s=t.hook?O:n;let r=s;const[i,o]=((l=t.ssrPath)==null?void 0:l.split("?"))??[];o&&(t.ssrSearch=o,t.ssrPath=i),t.hrefs=t.hrefs??((p=t.hook)==null?void 0:p.hrefs);let c=u.useRef({}),f=c.current,a=f;for(let h in s){const m=h==="base"?s[h]+(t[h]||""):t[h]||s[h];f===a&&m!==a[h]&&(c.current=a={...a}),a[h]=m,(m!==s[h]||m!==r[h])&&(r=a)}return u.createElement(j.Provider,{value:r,children:e})},k=({children:e,component:t},n)=>t?u.createElement(t,{params:n}):typeof e=="function"?e(n):e,te=e=>{let t=u.useRef(I);const n=t.current;return t.current=Object.keys(e).length!==Object.keys(n).length||Object.entries(e).some(([s,r])=>r!==n[s])?e:n},se=({path:e,nest:t,match:n,...s})=>{const r=g(),[i]=_(r),[o,c,f]=n??Z(r.parser,e,i,t),a=te({...Y(),...c});if(!o)return null;const l=f?u.createElement(ee,{base:f},k(s,a)):k(s,a);return u.createElement(K.Provider,{value:a,children:l})};u.forwardRef((e,t)=>{const n=g(),[s,r]=_(n),{to:i="",href:o=i,onClick:c,asChild:f,children:a,className:l,replace:p,state:h,...m}=e,v=C(d=>{d.ctrlKey||d.metaKey||d.altKey||d.shiftKey||d.button!==0||(c==null||c(d),d.defaultPrevented||(d.preventDefault(),r(o,e)))}),P=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return f&&u.isValidElement(a)?u.cloneElement(a,{onClick:v,href:P}):u.createElement("a",{...m,onClick:v,href:P,className:l!=null&&l.call?l(s===o):l,children:a,ref:t})});export{ee as R,se as a};
