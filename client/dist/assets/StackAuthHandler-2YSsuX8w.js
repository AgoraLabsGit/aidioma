import{s as f,t as h,y as v,R as w,j as e,z as S,K as x,r as P,c as k,T as y,v as A,B as E,L as I,U as C}from"./index-BrvAUAsm.js";import{a as c,P as j,M as F,S as T,y as L,s as B,u as V,L as U,I as R,F as Y,B as H,o as M,C as z}from"./Card-CHtIXQhu.js";function D(t){var o;const{t:s}=f(),r=h();v();const[a,n]=w.useState(null),i=e.jsx(c,{title:s("Invalid Verification Link"),fullPage:!!t.fullPage,children:e.jsx("p",{children:s("Please check if you have the correct link. If you continue to have issues, please contact support.")})}),d=e.jsx(c,{title:s("Expired Verification Link"),fullPage:!!t.fullPage,children:e.jsx("p",{children:s("Your email verification link has expired. Please request a new verification link from your account settings.")})});if(!((o=t.searchParams)!=null&&o.code))return i;if(a){if(a.status==="error"){if(x.VerificationCodeNotFound.isInstance(a.error))return i;if(x.VerificationCodeExpired.isInstance(a.error))return d;if(!x.VerificationCodeAlreadyUsed.isInstance(a.error))throw a.error}return e.jsx(c,{title:s("You email has been verified!"),fullPage:!!t.fullPage,primaryButtonText:s("Go home"),primaryAction:async()=>{await r.redirectToHome()}})}else return e.jsx(c,{title:s("Do you want to verify your email?"),fullPage:!!t.fullPage,primaryButtonText:s("Verify"),primaryAction:async()=>{var l;const u=await r.verifyEmail(((l=t.searchParams)==null?void 0:l.code)||S("No verification code provided"));n(u)},secondaryButtonText:s("Cancel"),secondaryAction:async()=>{await r.redirectToHome()}})}function J({onSent:t}){var g,p;const{t:s}=f(),r=L({email:B(s("Please enter a valid email")).defined().nonEmpty(s("Please enter your email"))}),{register:a,handleSubmit:n,formState:{errors:i},clearErrors:d}=V({resolver:M(r)}),o=h(),[u,l]=P.useState(!1),N=async m=>{l(!0);try{const{email:b}=m;await o.sendForgotPasswordEmail(b),t==null||t()}finally{l(!1)}};return e.jsxs("form",{className:"flex flex-col items-stretch stack-scope",onSubmit:m=>A(n(N)(m)),noValidate:!0,children:[e.jsx(U,{htmlFor:"email",className:"mb-1",children:s("Your Email")}),e.jsx(R,{id:"email",type:"email",autoComplete:"email",...a("email"),onChange:()=>d("email")}),e.jsx(Y,{text:(p=(g=i.email)==null?void 0:g.message)==null?void 0:p.toString()}),e.jsx(H,{type:"submit",className:"mt-6",loading:u,children:s("Send Email")})]})}function K(t){const{t:s}=f(),r=h(),a=v(),[n,i]=P.useState(!1);return a?e.jsx(j,{type:"signedIn",fullPage:!!t.fullPage}):n?e.jsx(j,{type:"emailSent",fullPage:!!t.fullPage}):e.jsx(F,{fullPage:!!t.fullPage,children:e.jsxs("div",{className:k("stack-scope max-w-[380px] flex-basis-[380px]",t.fullPage?"p-4":"p-0"),children:[e.jsxs("div",{className:"text-center",children:[e.jsx(y,{type:"h2",children:s("Reset Your Password")}),e.jsxs(y,{children:[s("Don't need to reset?")," ",e.jsx(T,{href:r.urls.signIn,children:s("Sign in")})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(J,{onSent:()=>i(!0)})})]})})}function G(){const[t]=E(),s=t.replace("/handler/",""),r=()=>{switch(s){case"forgot-password":return e.jsx(K,{});case"email-verification":case"verify":return e.jsx(D,{});case"user-profile":case"profile":return e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"User Profile"}),e.jsx(C,{})]});case"sign-out":return e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Signing out..."}),e.jsx("p",{className:"text-muted-foreground",children:"You will be redirected shortly."})]});default:return e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Authentication"}),e.jsxs("p",{className:"text-muted-foreground",children:["Handling authentication operation: ",s]}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("a",{href:"/handler/sign-in",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:"Sign In"}),e.jsx("a",{href:"/handler/sign-up",className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg hover:bg-secondary/90 transition-colors",children:"Sign Up"})]})]})}};return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-sm mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(I,{size:"lg",showText:!0,className:"mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"AIdioma Authentication"})]}),e.jsx(z,{className:"p-6",children:r()}),e.jsx("div",{className:"text-center text-xs text-muted-foreground",children:e.jsx("p",{children:e.jsx("a",{href:"/",className:"text-primary hover:text-primary/80 underline transition-colors",children:"‚Üê Back to AIdioma"})})})]})})}export{G as default};
